{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Documents/GitHub/BrightBuy-Frontend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\r\n * Admin Dashboard Component\r\n * - View users, orders\r\n * - Add/delete products\r\n * - Manage variant quantities (Quantities tab only)\r\n * - Category-wise listing for Products and Quantities tabs\r\n */import React,{useEffect,useState}from'react';import{useAuth}from'../context/AuthContext';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Admin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Admin=()=>{const{user,isAdmin}=useAuth();const navigate=useNavigate();const[activeTab,setActiveTab]=useState('users');const[users,setUsers]=useState([]);const[orders,setOrders]=useState([]);const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[variants,setVariants]=useState([]);const[expandedOrders,setExpandedOrders]=useState({});const[orderItems,setOrderItems]=useState({});const[selectedCategory,setSelectedCategory]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[successMessage,setSuccessMessage]=useState('');// New product form\nconst[newProduct,setNewProduct]=useState({product_name:'',category_id:'',description:'',variants:[]});// For new variant input\nconst[newVariant,setNewVariant]=useState({variant_name:'',price:'',quantity:'',SKU:''});// Variant quantity update (Quantities tab only)\nconst[variantUpdate,setVariantUpdate]=useState({variant_id:'',quantity:''});// Reports parameters\nconst[reportParams,setReportParams]=useState({year:new Date().getFullYear(),startDate:'',endDate:'',limit:50,userId:''});// For adding variant to existing product\nconst[addVariantToProduct,setAddVariantToProduct]=useState({product_id:'',variant_name:'',price:'',quantity:'',SKU:''});// For expanding product variants in Products tab\nconst[expandedProducts,setExpandedProducts]=useState({});const[productVariants,setProductVariants]=useState({});useEffect(()=>{if(!isAdmin)navigate('/');},[isAdmin,navigate]);useEffect(()=>{if(!isAdmin)return;if(activeTab==='users')fetchUsers();if(activeTab==='orders')fetchOrders();if(activeTab==='products'){fetchProducts();fetchCategories();}if(activeTab==='quantities'){fetchCategories();fetchProducts();fetchVariants();}if(activeTab==='reports'){// Set default year to current year\nsetReportParams(prev=>_objectSpread(_objectSpread({},prev),{},{year:new Date().getFullYear()}));}},[activeTab,isAdmin]);const axiosConfig=()=>{const token=user===null||user===void 0?void 0:user.access_token;if(!token)return{headers:{}};return{headers:{Authorization:\"Bearer \".concat(token)}};};const fetchUsers=async()=>{setLoading(true);setError('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');return;}const res=await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/admin/users',config);setUsers(res.data);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||'Failed to fetch users');}finally{setLoading(false);}};const fetchOrders=async()=>{setLoading(true);setError('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');return;}const res=await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/admin/orders',config);setOrders(res.data);}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'Failed to fetch orders');}finally{setLoading(false);}};const fetchProducts=async()=>{setLoading(true);setError('');try{const res=await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/products/');setProducts(res.data);}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.detail)||'Failed to fetch products');}finally{setLoading(false);}};const fetchCategories=async()=>{try{const res=await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/categories/');setCategories(res.data);}catch(err){// Non-fatal\n}};const fetchVariants=async()=>{setLoading(true);setError('');try{// get all products, then per-product variants\nconst prodRes=await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/products/');const allProducts=prodRes.data||[];const variantLists=await Promise.all(allProducts.map(async p=>{try{const res=await axios.get(\"https://brightbuy-backend-production-2ccc.up.railway.app/products/\".concat(p.product_id,\"/variants/\"));return res.data.variants||[];}catch(_unused){return[];}}));setVariants(variantLists.flat());}catch(err){var _err$response4,_err$response4$data;setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.detail)||'Failed to fetch variants');}finally{setLoading(false);}};const handleAddProduct=async e=>{e.preventDefault();setLoading(true);setError('');setSuccessMessage('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');return;}// Send product and variants as JSON\nconst payload={product_name:newProduct.product_name,category_id:parseInt(newProduct.category_id),description:newProduct.description||null,variants:newProduct.variants.length>0?newProduct.variants:null};const res=await axios.post('https://brightbuy-backend-production-2ccc.up.railway.app/admin/products',payload,config);setSuccessMessage(\"Product \\\"\".concat(res.data.product_name,\"\\\" added successfully!\"));setNewProduct({product_name:'',category_id:'',description:'',variants:[]});setNewVariant({variant_name:'',price:'',quantity:'',SKU:''});fetchProducts();}catch(err){var _err$response5,_err$response5$data;// Handle FastAPI validation errors\nif((_err$response5=err.response)!==null&&_err$response5!==void 0&&(_err$response5$data=_err$response5.data)!==null&&_err$response5$data!==void 0&&_err$response5$data.detail){if(Array.isArray(err.response.data.detail)){// Format validation errors\nconst errorMessages=err.response.data.detail.map(e=>\"\".concat(e.loc.join('.'),\": \").concat(e.msg)).join(', ');setError(errorMessages);}else{setError(err.response.data.detail);}}else{setError('Failed to add product');}}finally{setLoading(false);}};const handleDeleteProduct=async(productId,productName)=>{if(!window.confirm(\"Are you sure you want to delete \\\"\".concat(productName,\"\\\"?\")))return;setLoading(true);setError('');setSuccessMessage('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');return;}await axios.delete(\"https://brightbuy-backend-production-2ccc.up.railway.app/admin/products/\".concat(productId),config);setSuccessMessage(\"Product \\\"\".concat(productName,\"\\\" deleted successfully!\"));fetchProducts();}catch(err){var _err$response6,_err$response6$data;setError(((_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.detail)||'Failed to delete product');}finally{setLoading(false);}};const handleAddVariantToExistingProduct=async e=>{e.preventDefault();setLoading(true);setError('');setSuccessMessage('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');return;}const payload={variant_name:addVariantToProduct.variant_name,price:parseFloat(addVariantToProduct.price),quantity:parseInt(addVariantToProduct.quantity),SKU:addVariantToProduct.SKU||null};const res=await axios.post(\"https://brightbuy-backend-production-2ccc.up.railway.app/admin/products/\".concat(addVariantToProduct.product_id,\"/variants\"),payload,config);setSuccessMessage(\"Variant \\\"\".concat(res.data.variant_name,\"\\\" added successfully to product!\"));setAddVariantToProduct({product_id:'',variant_name:'',price:'',quantity:'',SKU:''});// Refresh variants for this product if it's expanded\nif(expandedProducts[addVariantToProduct.product_id]){fetchProductVariants(addVariantToProduct.product_id);}fetchVariants();// Refresh all variants\n}catch(err){var _err$response7,_err$response7$data;if((_err$response7=err.response)!==null&&_err$response7!==void 0&&(_err$response7$data=_err$response7.data)!==null&&_err$response7$data!==void 0&&_err$response7$data.detail){if(Array.isArray(err.response.data.detail)){const errorMessages=err.response.data.detail.map(e=>\"\".concat(e.loc.join('.'),\": \").concat(e.msg)).join(', ');setError(errorMessages);}else{setError(err.response.data.detail);}}else{setError('Failed to add variant to product');}}finally{setLoading(false);}};const toggleProductVariants=async productId=>{setExpandedProducts(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:!prev[productId]}));if(!expandedProducts[productId]&&!productVariants[productId]){await fetchProductVariants(productId);}};const fetchProductVariants=async productId=>{try{const res=await axios.get(\"https://brightbuy-backend-production-2ccc.up.railway.app/products/\".concat(productId,\"/variants/\"));setProductVariants(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:res.data.variants||[]}));}catch(err){setProductVariants(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:[]}));}};const handleUpdateVariantQuantity=async e=>{e.preventDefault();setLoading(true);setError('');setSuccessMessage('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');return;}const res=await axios.put(\"https://brightbuy-backend-production-2ccc.up.railway.app/admin/variants/\".concat(variantUpdate.variant_id,\"/quantity?quantity=\").concat(variantUpdate.quantity),{},config);setSuccessMessage(\"Variant quantity updated to \".concat(res.data.quantity,\"!\"));setVariantUpdate({variant_id:'',quantity:''});fetchVariants();}catch(err){var _err$response8,_err$response8$data;setError(((_err$response8=err.response)===null||_err$response8===void 0?void 0:(_err$response8$data=_err$response8.data)===null||_err$response8$data===void 0?void 0:_err$response8$data.detail)||'Failed to update variant quantity');}finally{setLoading(false);}};// Mark order as delivered (done)\nconst markOrderDelivered=orderId=>{setLoading(true);setError('');setSuccessMessage('');const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');setLoading(false);return;}axios.put(\"https://brightbuy-backend-production-2ccc.up.railway.app/analytics/orders/\".concat(orderId,\"/status\"),{status:'Delivered'},config).then(()=>{setSuccessMessage(\"Order \".concat(orderId,\" marked as Delivered\"));fetchOrders();}).catch(err=>{var _err$response9,_err$response9$data;setError(((_err$response9=err.response)===null||_err$response9===void 0?void 0:(_err$response9$data=_err$response9.data)===null||_err$response9$data===void 0?void 0:_err$response9$data.detail)||'Failed to update order status');}).finally(()=>setLoading(false));};// Mark payment as completed\nconst markPaymentCompleted=orderId=>{setLoading(true);setError('');setSuccessMessage('');const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');setLoading(false);return;}axios.put(\"https://brightbuy-backend-production-2ccc.up.railway.app/admin/orders/\".concat(orderId,\"/payment-status\"),{},config).then(response=>{setSuccessMessage(response.data.message||\"Payment marked as completed for order \".concat(orderId));fetchOrders();}).catch(err=>{var _err$response0,_err$response0$data;setError(((_err$response0=err.response)===null||_err$response0===void 0?void 0:(_err$response0$data=_err$response0.data)===null||_err$response0$data===void 0?void 0:_err$response0$data.detail)||'Failed to update payment status');}).finally(()=>setLoading(false));};const toggleOrderItems=async orderId=>{setExpandedOrders(prev=>_objectSpread(_objectSpread({},prev),{},{[orderId]:!prev[orderId]}));if(!expandedOrders[orderId]&&!orderItems[orderId]){try{const config=axiosConfig();const res=await axios.get(\"https://brightbuy-backend-production-2ccc.up.railway.app/admin/orders/\".concat(orderId,\"/items\"),config);setOrderItems(prev=>_objectSpread(_objectSpread({},prev),{},{[orderId]:res.data}));}catch(_unused2){setOrderItems(prev=>_objectSpread(_objectSpread({},prev),{},{[orderId]:[]}));setError('Failed to fetch order items');}}};if(!isAdmin)return null;const renderUsers=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"users-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Users\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(u=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:u.user_id}),/*#__PURE__*/_jsx(\"td\",{children:u.user_name}),/*#__PURE__*/_jsx(\"td\",{children:u.email}),/*#__PURE__*/_jsx(\"td\",{children:u.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(u.user_type==='admin'?'bg-danger':'bg-primary'),children:u.user_type})})]},u.user_id))})]})]});const renderOrders=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"orders-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Orders\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Order ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delivery Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(o=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:o.order_id}),/*#__PURE__*/_jsx(\"td\",{children:o.user_id}),/*#__PURE__*/_jsx(\"td\",{children:new Date(o.order_date).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",parseFloat(o.total_amount).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:o.delivery_status?o.delivery_status.charAt(0).toUpperCase()+o.delivery_status.slice(1):'N/A'}),(o.delivery_status||'').toLowerCase()!=='delivered'&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-success\",onClick:()=>markOrderDelivered(o.order_id),disabled:loading,children:\"Mark Done\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:o.payment_method||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:o.payment_status||'N/A'}),(o.payment_status||'').toLowerCase()==='pending'&&(o.payment_method||'').toLowerCase()==='cod'&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-warning\",onClick:()=>markPaymentCompleted(o.order_id),disabled:loading,children:\"Mark Paid\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-info\",onClick:()=>toggleOrderItems(o.order_id),children:expandedOrders[o.order_id]?'▼ Hide Products':'▶ View Products'})})]}),expandedOrders[o.order_id]&&orderItems[o.order_id]&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"8\",style:{backgroundColor:'#f8f9fa',padding:'15px'},children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Order Items:\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm table-bordered mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Item ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Variant\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtotal\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orderItems[o.order_id].map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.order_item_id}),/*#__PURE__*/_jsx(\"td\",{children:item.product_name||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.variant_name||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.SKU||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",parseFloat(item.price).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(parseFloat(item.price)*item.quantity).toFixed(2)]})]},item.order_item_id))})]})]})})]},o.order_id))})]})]});const renderProducts=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"products-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Add Variant to Existing Product\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleAddVariantToExistingProduct,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Product ID\",value:addVariantToProduct.product_id,onChange:e=>setAddVariantToProduct(_objectSpread(_objectSpread({},addVariantToProduct),{},{product_id:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Variant Name\",value:addVariantToProduct.variant_name,onChange:e=>setAddVariantToProduct(_objectSpread(_objectSpread({},addVariantToProduct),{},{variant_name:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",className:\"form-control\",placeholder:\"Price\",value:addVariantToProduct.price,onChange:e=>setAddVariantToProduct(_objectSpread(_objectSpread({},addVariantToProduct),{},{price:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Quantity\",value:addVariantToProduct.quantity,onChange:e=>setAddVariantToProduct(_objectSpread(_objectSpread({},addVariantToProduct),{},{quantity:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"SKU (optional)\",value:addVariantToProduct.SKU,onChange:e=>setAddVariantToProduct(_objectSpread(_objectSpread({},addVariantToProduct),{},{SKU:e.target.value}))})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success w-100\",disabled:loading,children:\"Add\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Add New Product\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddProduct,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Product Name\",value:newProduct.product_name,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{product_name:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:newProduct.category_id,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{category_id:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.category_id,children:c.category_name},c.category_id))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Description (optional)\",value:newProduct.description,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{description:e.target.value}))})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",disabled:loading,children:\"Add Product\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Add Variants (optional)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Variant Name\",value:newVariant.variant_name,onChange:e=>setNewVariant(_objectSpread(_objectSpread({},newVariant),{},{variant_name:e.target.value}))})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Price\",value:newVariant.price,onChange:e=>setNewVariant(_objectSpread(_objectSpread({},newVariant),{},{price:e.target.value}))})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Quantity\",value:newVariant.quantity,onChange:e=>setNewVariant(_objectSpread(_objectSpread({},newVariant),{},{quantity:e.target.value}))})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"SKU (optional)\",value:newVariant.SKU,onChange:e=>setNewVariant(_objectSpread(_objectSpread({},newVariant),{},{SKU:e.target.value}))})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary w-100\",onClick:()=>{if(!newVariant.variant_name||!newVariant.price||!newVariant.quantity)return;setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{variants:[...newProduct.variants,{variant_name:newVariant.variant_name,price:parseFloat(newVariant.price),quantity:parseInt(newVariant.quantity),SKU:newVariant.SKU||null}]}));setNewVariant({variant_name:'',price:'',quantity:'',SKU:''});},children:\"Add Variant\"})})]}),newProduct.variants.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:newProduct.variants.map((v,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[v.variant_name,\" | Price: \",v.price,\" | Qty: \",v.quantity,\" | SKU: \",v.SKU,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm btn-danger\",onClick:()=>{setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{variants:newProduct.variants.filter((_,i)=>i!==idx)}));},children:\"Remove\"})]},idx))})})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Select Category\"}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",children:categories.map(c=>/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary mx-1 \".concat(c.category_id===selectedCategory?'active':''),onClick:()=>setSelectedCategory(c.category_id),children:c.category_name},c.category_id))})]}),selectedCategory&&/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.filter(p=>p.category_id===selectedCategory).map(p=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.product_id}),/*#__PURE__*/_jsx(\"td\",{children:p.product_name}),/*#__PURE__*/_jsx(\"td\",{children:p.description||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-info me-2\",onClick:()=>toggleProductVariants(p.product_id),children:expandedProducts[p.product_id]?'▼ Hide Variants':'▶ View Variants'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleDeleteProduct(p.product_id,p.product_name),disabled:loading,children:\"Delete\"})]})]}),expandedProducts[p.product_id]&&productVariants[p.product_id]&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"4\",style:{backgroundColor:'#f8f9fa',padding:'15px'},children:[/*#__PURE__*/_jsxs(\"h6\",{children:[\"Variants for \",p.product_name,\":\"]}),productVariants[p.product_id].length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm table-bordered mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Variant ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Variant Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:productVariants[p.product_id].map(variant=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:variant.variant_id}),/*#__PURE__*/_jsx(\"td\",{children:variant.variant_name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",parseFloat(variant.price).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:variant.quantity}),/*#__PURE__*/_jsx(\"td\",{children:variant.SKU||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:async()=>{if(!window.confirm(\"Are you sure you want to delete variant '\".concat(variant.variant_name,\"'?\")))return;setLoading(true);setError('');setSuccessMessage('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');setLoading(false);return;}await axios.delete(\"https://brightbuy-backend-production-2ccc.up.railway.app/admin/variants/\".concat(variant.variant_id),config);setSuccessMessage(\"Variant '\".concat(variant.variant_name,\"' deleted successfully!\"));fetchProductVariants(p.product_id);fetchVariants();}catch(err){var _err$response1,_err$response1$data;setError(((_err$response1=err.response)===null||_err$response1===void 0?void 0:(_err$response1$data=_err$response1.data)===null||_err$response1$data===void 0?void 0:_err$response1$data.detail)||'Failed to delete variant');}finally{setLoading(false);}},disabled:loading,children:\"Delete\"})})]},variant.variant_id))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No variants found for this product.\"})]})})]},p.product_id))})]})]});const renderQuantities=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"quantities-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Variant Quantities\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Select Category\"}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",children:categories.map(c=>/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary mx-1 \".concat(c.category_id===selectedCategory?'active':''),onClick:()=>setSelectedCategory(c.category_id),children:c.category_name},c.category_id))})]}),selectedCategory&&/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Variant ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Variant Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(()=>{const productIds=new Set(products.filter(p=>p.category_id===selectedCategory).map(p=>p.product_id));return variants.filter(v=>productIds.has(v.product_id)).map(v=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:v.variant_id}),/*#__PURE__*/_jsx(\"td\",{children:v.product_id}),/*#__PURE__*/_jsx(\"td\",{children:v.variant_name}),/*#__PURE__*/_jsx(\"td\",{children:v.quantity})]},v.variant_id));})()})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3 align-items-center\",onSubmit:handleUpdateVariantQuantity,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Variant ID\",value:variantUpdate.variant_id,onChange:e=>setVariantUpdate(_objectSpread(_objectSpread({},variantUpdate),{},{variant_id:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"New Quantity\",value:variantUpdate.quantity,onChange:e=>setVariantUpdate(_objectSpread(_objectSpread({},variantUpdate),{},{quantity:e.target.value})),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update Quantity\"})})]})]});const downloadReport=async(endpoint,filename)=>{setLoading(true);setError('');setSuccessMessage('');try{const config=axiosConfig();if(!config.headers.Authorization){setError('Not authenticated. Please log in as admin.');return;}const response=await axios.get(\"https://brightbuy-backend-production-2ccc.up.railway.app\".concat(endpoint),_objectSpread(_objectSpread({},config),{},{responseType:'blob'}));// Create download link\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',filename);document.body.appendChild(link);link.click();link.remove();window.URL.revokeObjectURL(url);setSuccessMessage(\"\".concat(filename,\" downloaded successfully!\"));}catch(err){var _err$response10,_err$response10$data;setError(((_err$response10=err.response)===null||_err$response10===void 0?void 0:(_err$response10$data=_err$response10.data)===null||_err$response10$data===void 0?void 0:_err$response10$data.detail)||\"Failed to download \".concat(filename));}finally{setLoading(false);}};const renderReports=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"reports-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Download Reports\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Generate and download PDF reports for sales analysis and business insights.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-calendar-range\"}),\" Quarterly Sales Report\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"Get sales breakdown by quarter for a specific year.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:reportParams.year,onChange:e=>setReportParams(_objectSpread(_objectSpread({},reportParams),{},{year:e.target.value})),min:\"2020\",max:\"2030\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>downloadReport(\"/reports/quarterly-sales/\".concat(reportParams.year),\"quarterly_sales_\".concat(reportParams.year,\".pdf\")),disabled:loading||!reportParams.year,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download\"}),\" Download Report\"]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trophy\"}),\" Top Selling Products\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"View best-selling products with optional date filters.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Start Date (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",value:reportParams.startDate,onChange:e=>setReportParams(_objectSpread(_objectSpread({},reportParams),{},{startDate:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"End Date (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",value:reportParams.endDate,onChange:e=>setReportParams(_objectSpread(_objectSpread({},reportParams),{},{endDate:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Limit\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:reportParams.limit,onChange:e=>setReportParams(_objectSpread(_objectSpread({},reportParams),{},{limit:e.target.value})),min:\"1\",max:\"100\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>{let endpoint=\"/reports/top-selling-products?limit=\".concat(reportParams.limit);if(reportParams.startDate)endpoint+=\"&start_date=\".concat(reportParams.startDate);if(reportParams.endDate)endpoint+=\"&end_date=\".concat(reportParams.endDate);downloadReport(endpoint,\"top_selling_products.pdf\");},disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download\"}),\" Download Report\"]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-tags\"}),\" Category-wise Orders\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"Analyze total orders and revenue by product category.\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>downloadReport(\"/reports/category-orders\",\"category_orders_report.pdf\"),disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download\"}),\" Download Report\"]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-badge\"}),\" Customer Order Summary\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"Get detailed order history and payment status for a specific customer.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"User ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:reportParams.userId,onChange:e=>setReportParams(_objectSpread(_objectSpread({},reportParams),{},{userId:e.target.value})),placeholder:\"Enter customer user ID\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>downloadReport(\"/reports/customer-orders/\".concat(reportParams.userId),\"customer_\".concat(reportParams.userId,\"_orders.pdf\")),disabled:loading||!reportParams.userId,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download\"}),\" Download Report\"]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-people\"}),\" All Customers Summary\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"Comprehensive report of top customers with order statistics and spending analysis.\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>downloadReport(\"/reports/all-customers-summary\",\"all_customers_summary.pdf\"),disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download\"}),\" Download Report\"]})]})})})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard container my-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-4\",children:\"Admin Dashboard\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger alert-dismissible fade show\",role:\"alert\",children:[error,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setError('')})]}),successMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success alert-dismissible fade show\",role:\"alert\",children:[successMessage,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setSuccessMessage('')})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-tabs mb-4\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link \".concat(activeTab==='users'?'active':''),onClick:()=>setActiveTab('users'),children:\"Users\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link \".concat(activeTab==='orders'?'active':''),onClick:()=>setActiveTab('orders'),children:\"Orders\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link \".concat(activeTab==='products'?'active':''),onClick:()=>setActiveTab('products'),children:\"Products\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link \".concat(activeTab==='quantities'?'active':''),onClick:()=>setActiveTab('quantities'),children:\"Quantities\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link \".concat(activeTab==='reports'?'active':''),onClick:()=>setActiveTab('reports'),children:\"Reports\"})})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\"})}),activeTab==='users'&&renderUsers(),activeTab==='orders'&&renderOrders(),activeTab==='products'&&renderProducts(),activeTab==='quantities'&&renderQuantities(),activeTab==='reports'&&renderReports()]});};export default Admin;","map":{"version":3,"names":["React","useEffect","useState","useAuth","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Admin","user","isAdmin","navigate","activeTab","setActiveTab","users","setUsers","orders","setOrders","products","setProducts","categories","setCategories","variants","setVariants","expandedOrders","setExpandedOrders","orderItems","setOrderItems","selectedCategory","setSelectedCategory","loading","setLoading","error","setError","successMessage","setSuccessMessage","newProduct","setNewProduct","product_name","category_id","description","newVariant","setNewVariant","variant_name","price","quantity","SKU","variantUpdate","setVariantUpdate","variant_id","reportParams","setReportParams","year","Date","getFullYear","startDate","endDate","limit","userId","addVariantToProduct","setAddVariantToProduct","product_id","expandedProducts","setExpandedProducts","productVariants","setProductVariants","fetchUsers","fetchOrders","fetchProducts","fetchCategories","fetchVariants","prev","_objectSpread","axiosConfig","token","access_token","headers","Authorization","concat","config","res","get","data","err","_err$response","_err$response$data","response","detail","_err$response2","_err$response2$data","_err$response3","_err$response3$data","prodRes","allProducts","variantLists","Promise","all","map","p","_unused","flat","_err$response4","_err$response4$data","handleAddProduct","e","preventDefault","payload","parseInt","length","post","_err$response5","_err$response5$data","Array","isArray","errorMessages","loc","join","msg","handleDeleteProduct","productId","productName","window","confirm","delete","_err$response6","_err$response6$data","handleAddVariantToExistingProduct","parseFloat","fetchProductVariants","_err$response7","_err$response7$data","toggleProductVariants","handleUpdateVariantQuantity","put","_err$response8","_err$response8$data","markOrderDelivered","orderId","status","then","catch","_err$response9","_err$response9$data","finally","markPaymentCompleted","message","_err$response0","_err$response0$data","toggleOrderItems","_unused2","renderUsers","className","children","u","user_id","user_name","email","name","user_type","renderOrders","o","Fragment","order_id","order_date","toLocaleDateString","total_amount","toFixed","delivery_status","charAt","toUpperCase","slice","toLowerCase","onClick","disabled","payment_method","payment_status","colSpan","style","backgroundColor","padding","item","order_item_id","renderProducts","onSubmit","type","placeholder","value","onChange","target","required","step","c","category_name","v","idx","filter","_","i","role","variant","_err$response1","_err$response1$data","renderQuantities","productIds","Set","has","downloadReport","endpoint","filename","responseType","url","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","remove","revokeObjectURL","_err$response10","_err$response10$data","renderReports","min","max"],"sources":["C:/Users/user/Documents/GitHub/BrightBuy-Frontend/frontend/src/pages/Admin.jsx"],"sourcesContent":["/**\r\n * Admin Dashboard Component\r\n * - View users, orders\r\n * - Add/delete products\r\n * - Manage variant quantities (Quantities tab only)\r\n * - Category-wise listing for Products and Quantities tabs\r\n */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Admin.css';\r\n\r\nconst Admin = () => {\r\n  const { user, isAdmin } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [activeTab, setActiveTab] = useState('users');\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [orders, setOrders] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [variants, setVariants] = useState([]);\r\n\r\n  const [expandedOrders, setExpandedOrders] = useState({});\r\n  const [orderItems, setOrderItems] = useState({});\r\n\r\n  const [selectedCategory, setSelectedCategory] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n\r\n  // New product form\r\n  const [newProduct, setNewProduct] = useState({\r\n    product_name: '',\r\n    category_id: '',\r\n    description: '',\r\n    variants: []\r\n  });\r\n\r\n  // For new variant input\r\n  const [newVariant, setNewVariant] = useState({\r\n    variant_name: '',\r\n    price: '',\r\n    quantity: '',\r\n    SKU: ''\r\n  });\r\n\r\n  // Variant quantity update (Quantities tab only)\r\n  const [variantUpdate, setVariantUpdate] = useState({\r\n    variant_id: '',\r\n    quantity: ''\r\n  });\r\n\r\n  // Reports parameters\r\n  const [reportParams, setReportParams] = useState({\r\n    year: new Date().getFullYear(),\r\n    startDate: '',\r\n    endDate: '',\r\n    limit: 50,\r\n    userId: ''\r\n  });\r\n\r\n  // For adding variant to existing product\r\n  const [addVariantToProduct, setAddVariantToProduct] = useState({\r\n    product_id: '',\r\n    variant_name: '',\r\n    price: '',\r\n    quantity: '',\r\n    SKU: ''\r\n  });\r\n\r\n  // For expanding product variants in Products tab\r\n  const [expandedProducts, setExpandedProducts] = useState({});\r\n  const [productVariants, setProductVariants] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (!isAdmin) navigate('/');\r\n  }, [isAdmin, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (!isAdmin) return;\r\n    if (activeTab === 'users') fetchUsers();\r\n    if (activeTab === 'orders') fetchOrders();\r\n    if (activeTab === 'products') {\r\n      fetchProducts();\r\n      fetchCategories();\r\n    }\r\n    if (activeTab === 'quantities') {\r\n      fetchCategories();\r\n      fetchProducts();\r\n      fetchVariants();\r\n    }\r\n    if (activeTab === 'reports') {\r\n      // Set default year to current year\r\n      setReportParams(prev => ({ ...prev, year: new Date().getFullYear() }));\r\n    }\r\n  }, [activeTab, isAdmin]);\r\n\r\n  const axiosConfig = () => {\r\n    const token = user?.access_token;\r\n    if (!token) return { headers: {} };\r\n    return { headers: { Authorization: `Bearer ${token}` } };\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      const config = axiosConfig();\r\n      if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); return; }\r\n  const res = await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/admin/users', config);\r\n      setUsers(res.data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Failed to fetch users');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchOrders = async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      const config = axiosConfig();\r\n      if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); return; }\r\n  const res = await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/admin/orders', config);\r\n      setOrders(res.data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Failed to fetch orders');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchProducts = async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n  const res = await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/products/');\r\n      setProducts(res.data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Failed to fetch products');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n  const res = await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/categories/');\r\n      setCategories(res.data);\r\n    } catch (err) {\r\n      // Non-fatal\r\n    }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      // get all products, then per-product variants\r\n  const prodRes = await axios.get('https://brightbuy-backend-production-2ccc.up.railway.app/products/');\r\n      const allProducts = prodRes.data || [];\r\n      const variantLists = await Promise.all(\r\n        allProducts.map(async (p) => {\r\n          try {\r\n            const res = await axios.get(`https://brightbuy-backend-production-2ccc.up.railway.app/products/${p.product_id}/variants/`);\r\n            return res.data.variants || [];\r\n          } catch {\r\n            return [];\r\n          }\r\n        })\r\n      );\r\n      setVariants(variantLists.flat());\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Failed to fetch variants');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleAddProduct = async (e) => {\r\n    e.preventDefault(); setLoading(true); setError(''); setSuccessMessage('');\r\n    try {\r\n      const config = axiosConfig();\r\n      if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); return; }\r\n      // Send product and variants as JSON\r\n      const payload = {\r\n        product_name: newProduct.product_name,\r\n        category_id: parseInt(newProduct.category_id),\r\n        description: newProduct.description || null,\r\n        variants: newProduct.variants.length > 0 ? newProduct.variants : null\r\n      };\r\n  const res = await axios.post('https://brightbuy-backend-production-2ccc.up.railway.app/admin/products', payload, config);\r\n      setSuccessMessage(`Product \"${res.data.product_name}\" added successfully!`);\r\n      setNewProduct({ product_name: '', category_id: '', description: '', variants: [] });\r\n      setNewVariant({ variant_name: '', price: '', quantity: '', SKU: '' });\r\n      fetchProducts();\r\n    } catch (err) {\r\n      // Handle FastAPI validation errors\r\n      if (err.response?.data?.detail) {\r\n        if (Array.isArray(err.response.data.detail)) {\r\n          // Format validation errors\r\n          const errorMessages = err.response.data.detail.map(e => `${e.loc.join('.')}: ${e.msg}`).join(', ');\r\n          setError(errorMessages);\r\n        } else {\r\n          setError(err.response.data.detail);\r\n        }\r\n      } else {\r\n        setError('Failed to add product');\r\n      }\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleDeleteProduct = async (productId, productName) => {\r\n    if (!window.confirm(`Are you sure you want to delete \"${productName}\"?`)) return;\r\n    setLoading(true); setError(''); setSuccessMessage('');\r\n    try {\r\n      const config = axiosConfig();\r\n      if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); return; }\r\n  await axios.delete(`https://brightbuy-backend-production-2ccc.up.railway.app/admin/products/${productId}`, config);\r\n      setSuccessMessage(`Product \"${productName}\" deleted successfully!`);\r\n      fetchProducts();\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Failed to delete product');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleAddVariantToExistingProduct = async (e) => {\r\n    e.preventDefault(); setLoading(true); setError(''); setSuccessMessage('');\r\n    try {\r\n      const config = axiosConfig();\r\n      if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); return; }\r\n      \r\n      const payload = {\r\n        variant_name: addVariantToProduct.variant_name,\r\n        price: parseFloat(addVariantToProduct.price),\r\n        quantity: parseInt(addVariantToProduct.quantity),\r\n        SKU: addVariantToProduct.SKU || null\r\n      };\r\n      \r\n      const res = await axios.post(\r\n  `https://brightbuy-backend-production-2ccc.up.railway.app/admin/products/${addVariantToProduct.product_id}/variants`,\r\n        payload,\r\n        config\r\n      );\r\n      \r\n      setSuccessMessage(`Variant \"${res.data.variant_name}\" added successfully to product!`);\r\n      setAddVariantToProduct({ product_id: '', variant_name: '', price: '', quantity: '', SKU: '' });\r\n      \r\n      // Refresh variants for this product if it's expanded\r\n      if (expandedProducts[addVariantToProduct.product_id]) {\r\n        fetchProductVariants(addVariantToProduct.product_id);\r\n      }\r\n      \r\n      fetchVariants(); // Refresh all variants\r\n    } catch (err) {\r\n      if (err.response?.data?.detail) {\r\n        if (Array.isArray(err.response.data.detail)) {\r\n          const errorMessages = err.response.data.detail.map(e => `${e.loc.join('.')}: ${e.msg}`).join(', ');\r\n          setError(errorMessages);\r\n        } else {\r\n          setError(err.response.data.detail);\r\n        }\r\n      } else {\r\n        setError('Failed to add variant to product');\r\n      }\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const toggleProductVariants = async (productId) => {\r\n    setExpandedProducts(prev => ({ ...prev, [productId]: !prev[productId] }));\r\n    if (!expandedProducts[productId] && !productVariants[productId]) {\r\n      await fetchProductVariants(productId);\r\n    }\r\n  };\r\n\r\n  const fetchProductVariants = async (productId) => {\r\n    try {\r\n  const res = await axios.get(`https://brightbuy-backend-production-2ccc.up.railway.app/products/${productId}/variants/`);\r\n      setProductVariants(prev => ({ ...prev, [productId]: res.data.variants || [] }));\r\n    } catch (err) {\r\n      setProductVariants(prev => ({ ...prev, [productId]: [] }));\r\n    }\r\n  };\r\n\r\n  const handleUpdateVariantQuantity = async (e) => {\r\n    e.preventDefault(); setLoading(true); setError(''); setSuccessMessage('');\r\n    try {\r\n      const config = axiosConfig();\r\n      if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); return; }\r\n      const res = await axios.put(\r\n  `https://brightbuy-backend-production-2ccc.up.railway.app/admin/variants/${variantUpdate.variant_id}/quantity?quantity=${variantUpdate.quantity}`,\r\n        {},\r\n        config\r\n      );\r\n      setSuccessMessage(`Variant quantity updated to ${res.data.quantity}!`);\r\n      setVariantUpdate({ variant_id: '', quantity: '' });\r\n      fetchVariants();\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Failed to update variant quantity');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  // Mark order as delivered (done)\r\n  const markOrderDelivered = (orderId) => {\r\n    setLoading(true); setError(''); setSuccessMessage('');\r\n    const config = axiosConfig();\r\n    if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); setLoading(false); return; }\r\n  axios.put(`https://brightbuy-backend-production-2ccc.up.railway.app/analytics/orders/${orderId}/status`, { status: 'Delivered' }, config)\r\n      .then(() => {\r\n        setSuccessMessage(`Order ${orderId} marked as Delivered`);\r\n        fetchOrders();\r\n      })\r\n      .catch(err => {\r\n        setError(err.response?.data?.detail || 'Failed to update order status');\r\n      })\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  // Mark payment as completed\r\n  const markPaymentCompleted = (orderId) => {\r\n    setLoading(true); setError(''); setSuccessMessage('');\r\n    const config = axiosConfig();\r\n    if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); setLoading(false); return; }\r\n  axios.put(`https://brightbuy-backend-production-2ccc.up.railway.app/admin/orders/${orderId}/payment-status`, {}, config)\r\n      .then((response) => {\r\n        setSuccessMessage(response.data.message || `Payment marked as completed for order ${orderId}`);\r\n        fetchOrders();\r\n      })\r\n      .catch(err => {\r\n        setError(err.response?.data?.detail || 'Failed to update payment status');\r\n      })\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  const toggleOrderItems = async (orderId) => {\r\n    setExpandedOrders(prev => ({ ...prev, [orderId]: !prev[orderId] }));\r\n    if (!expandedOrders[orderId] && !orderItems[orderId]) {\r\n      try {\r\n        const config = axiosConfig();\r\n  const res = await axios.get(`https://brightbuy-backend-production-2ccc.up.railway.app/admin/orders/${orderId}/items`, config);\r\n        setOrderItems(prev => ({ ...prev, [orderId]: res.data }));\r\n      } catch {\r\n        setOrderItems(prev => ({ ...prev, [orderId]: [] }));\r\n        setError('Failed to fetch order items');\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!isAdmin) return null;\r\n\r\n  const renderUsers = () => (\r\n    <div className=\"users-section\">\r\n      <h2>Users</h2>\r\n      <table className=\"table table-striped\">\r\n        <thead>\r\n          <tr>\r\n            <th>User ID</th>\r\n            <th>Username</th>\r\n            <th>Email</th>\r\n            <th>Name</th>\r\n            <th>Role</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.map(u => (\r\n            <tr key={u.user_id}>\r\n              <td>{u.user_id}</td>\r\n              <td>{u.user_name}</td>\r\n              <td>{u.email}</td>\r\n              <td>{u.name}</td>\r\n              <td><span className={`badge ${u.user_type === 'admin' ? 'bg-danger' : 'bg-primary'}`}>{u.user_type}</span></td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n  const renderOrders = () => (\r\n    <div className=\"orders-section\">\r\n      <h2>Orders</h2>\r\n      <table className=\"table table-hover\">\r\n        <thead>\r\n          <tr>\r\n            <th>Order ID</th>\r\n            <th>User ID</th>\r\n            <th>Date</th>\r\n            <th>Total</th>\r\n            <th>Delivery Status</th>\r\n            <th>Payment Method</th>\r\n            <th>Payment Status</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {orders.map(o => (\r\n            <React.Fragment key={o.order_id}>\r\n              <tr>\r\n                <td>{o.order_id}</td>\r\n                <td>{o.user_id}</td>\r\n                <td>{new Date(o.order_date).toLocaleDateString()}</td>\r\n                <td>${parseFloat(o.total_amount).toFixed(2)}</td>\r\n                <td>\r\n                  <div className=\"d-flex align-items-center gap-2\">\r\n                    <span>{o.delivery_status ? (o.delivery_status.charAt(0).toUpperCase() + o.delivery_status.slice(1)) : 'N/A'}</span>\r\n                    {(o.delivery_status || '').toLowerCase() !== 'delivered' && (\r\n                      <button\r\n                        className=\"btn btn-sm btn-success\"\r\n                        onClick={() => markOrderDelivered(o.order_id)}\r\n                        disabled={loading}\r\n                      >\r\n                        Mark Done\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </td>\r\n                <td>{o.payment_method || 'N/A'}</td>\r\n                <td>\r\n                  <div className=\"d-flex align-items-center gap-2\">\r\n                    <span>{o.payment_status || 'N/A'}</span>\r\n                    {(o.payment_status || '').toLowerCase() === 'pending' && (o.payment_method || '').toLowerCase() === 'cod' && (\r\n                      <button\r\n                        className=\"btn btn-sm btn-warning\"\r\n                        onClick={() => markPaymentCompleted(o.order_id)}\r\n                        disabled={loading}\r\n                      >\r\n                        Mark Paid\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <button className=\"btn btn-sm btn-info\" onClick={() => toggleOrderItems(o.order_id)}>\r\n                    {expandedOrders[o.order_id] ? '▼ Hide Products' : '▶ View Products'}\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              {expandedOrders[o.order_id] && orderItems[o.order_id] && (\r\n                <tr>\r\n                  <td colSpan=\"8\" style={{ backgroundColor: '#f8f9fa', padding: '15px' }}>\r\n                    <h6>Order Items:</h6>\r\n                    <table className=\"table table-sm table-bordered mb-0\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Item ID</th>\r\n                          <th>Product Name</th>\r\n                          <th>Variant</th>\r\n                          <th>SKU</th>\r\n                          <th>Quantity</th>\r\n                          <th>Price</th>\r\n                          <th>Subtotal</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {orderItems[o.order_id].map(item => (\r\n                          <tr key={item.order_item_id}>\r\n                            <td>{item.order_item_id}</td>\r\n                            <td>{item.product_name || 'N/A'}</td>\r\n                            <td>{item.variant_name || 'N/A'}</td>\r\n                            <td>{item.SKU || 'N/A'}</td>\r\n                            <td>{item.quantity}</td>\r\n                            <td>${parseFloat(item.price).toFixed(2)}</td>\r\n                            <td>${(parseFloat(item.price) * item.quantity).toFixed(2)}</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </React.Fragment>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n  const renderProducts = () => (\r\n    <div className=\"products-section\">\r\n      <h2>Products</h2>\r\n      \r\n      {/* Add Variant to Existing Product Section */}\r\n      <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">Add Variant to Existing Product</h5>\r\n          <form onSubmit={handleAddVariantToExistingProduct}>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Product ID\"\r\n                  value={addVariantToProduct.product_id}\r\n                  onChange={(e) => setAddVariantToProduct({ ...addVariantToProduct, product_id: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Variant Name\"\r\n                  value={addVariantToProduct.variant_name}\r\n                  onChange={(e) => setAddVariantToProduct({ ...addVariantToProduct, variant_name: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Price\"\r\n                  value={addVariantToProduct.price}\r\n                  onChange={(e) => setAddVariantToProduct({ ...addVariantToProduct, price: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Quantity\"\r\n                  value={addVariantToProduct.quantity}\r\n                  onChange={(e) => setAddVariantToProduct({ ...addVariantToProduct, quantity: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"SKU (optional)\"\r\n                  value={addVariantToProduct.SKU}\r\n                  onChange={(e) => setAddVariantToProduct({ ...addVariantToProduct, SKU: e.target.value })}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-1\">\r\n                <button type=\"submit\" className=\"btn btn-success w-100\" disabled={loading}>Add</button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">Add New Product</h5>\r\n          <form onSubmit={handleAddProduct}>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Product Name\"\r\n                  value={newProduct.product_name}\r\n                  onChange={(e) => setNewProduct({ ...newProduct, product_name: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <select\r\n                  className=\"form-select\"\r\n                  value={newProduct.category_id}\r\n                  onChange={(e) => setNewProduct({ ...newProduct, category_id: e.target.value })}\r\n                  required\r\n                >\r\n                  <option value=\"\">Select Category</option>\r\n                  {categories.map(c => (\r\n                    <option key={c.category_id} value={c.category_id}>{c.category_name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Description (optional)\"\r\n                  value={newProduct.description}\r\n                  onChange={(e) => setNewProduct({ ...newProduct, description: e.target.value })}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <button type=\"submit\" className=\"btn btn-primary w-100\" disabled={loading}>Add Product</button>\r\n              </div>\r\n            </div>\r\n            {/* Add Variant Section */}\r\n            <div className=\"mt-3\">\r\n              <h6>Add Variants (optional)</h6>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Variant Name\"\r\n                    value={newVariant.variant_name}\r\n                    onChange={(e) => setNewVariant({ ...newVariant, variant_name: e.target.value })}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Price\"\r\n                    value={newVariant.price}\r\n                    onChange={(e) => setNewVariant({ ...newVariant, price: e.target.value })}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Quantity\"\r\n                    value={newVariant.quantity}\r\n                    onChange={(e) => setNewVariant({ ...newVariant, quantity: e.target.value })}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"SKU (optional)\"\r\n                    value={newVariant.SKU}\r\n                    onChange={(e) => setNewVariant({ ...newVariant, SKU: e.target.value })}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-secondary w-100\"\r\n                    onClick={() => {\r\n                      if (!newVariant.variant_name || !newVariant.price || !newVariant.quantity) return;\r\n                      setNewProduct({\r\n                        ...newProduct,\r\n                        variants: [...newProduct.variants, {\r\n                          variant_name: newVariant.variant_name,\r\n                          price: parseFloat(newVariant.price),\r\n                          quantity: parseInt(newVariant.quantity),\r\n                          SKU: newVariant.SKU || null\r\n                        }]\r\n                      });\r\n                      setNewVariant({ variant_name: '', price: '', quantity: '', SKU: '' });\r\n                    }}\r\n                  >Add Variant</button>\r\n                </div>\r\n              </div>\r\n              {/* List added variants */}\r\n              {newProduct.variants.length > 0 && (\r\n                <div className=\"mt-2\">\r\n                  <ul className=\"list-group\">\r\n                    {newProduct.variants.map((v, idx) => (\r\n                      <li key={idx} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                        {v.variant_name} | Price: {v.price} | Qty: {v.quantity} | SKU: {v.SKU}\r\n                        <button type=\"button\" className=\"btn btn-sm btn-danger\" onClick={() => {\r\n                          setNewProduct({\r\n                            ...newProduct,\r\n                            variants: newProduct.variants.filter((_, i) => i !== idx)\r\n                          });\r\n                        }}>Remove</button>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mb-3\">\r\n        <h5>Select Category</h5>\r\n        <div className=\"btn-group\" role=\"group\">\r\n          {categories.map(c => (\r\n            <button\r\n              key={c.category_id}\r\n              className={`btn btn-outline-primary mx-1 ${c.category_id === selectedCategory ? 'active' : ''}`}\r\n              onClick={() => setSelectedCategory(c.category_id)}\r\n            >\r\n              {c.category_name}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {selectedCategory && (\r\n        <table className=\"table table-striped\">\r\n          <thead>\r\n            <tr>\r\n              <th>Product ID</th>\r\n              <th>Product Name</th>\r\n              <th>Description</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {products.filter(p => p.category_id === selectedCategory).map(p => (\r\n              <React.Fragment key={p.product_id}>\r\n                <tr>\r\n                  <td>{p.product_id}</td>\r\n                  <td>{p.product_name}</td>\r\n                  <td>{p.description || 'N/A'}</td>\r\n                  <td>\r\n                    <button \r\n                      className=\"btn btn-sm btn-info me-2\" \r\n                      onClick={() => toggleProductVariants(p.product_id)}\r\n                    >\r\n                      {expandedProducts[p.product_id] ? '▼ Hide Variants' : '▶ View Variants'}\r\n                    </button>\r\n                    <button \r\n                      className=\"btn btn-sm btn-danger\" \r\n                      onClick={() => handleDeleteProduct(p.product_id, p.product_name)} \r\n                      disabled={loading}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n                {expandedProducts[p.product_id] && productVariants[p.product_id] && (\r\n                  <tr>\r\n                    <td colSpan=\"4\" style={{ backgroundColor: '#f8f9fa', padding: '15px' }}>\r\n                      <h6>Variants for {p.product_name}:</h6>\r\n                      {productVariants[p.product_id].length > 0 ? (\r\n                        <table className=\"table table-sm table-bordered mb-0\">\r\n                          <thead>\r\n                            <tr>\r\n                              <th>Variant ID</th>\r\n                              <th>Variant Name</th>\r\n                              <th>Price</th>\r\n                              <th>Quantity</th>\r\n                              <th>SKU</th>\r\n                              <th>Actions</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {productVariants[p.product_id].map(variant => (\r\n                              <tr key={variant.variant_id}>\r\n                                <td>{variant.variant_id}</td>\r\n                                <td>{variant.variant_name}</td>\r\n                                <td>${parseFloat(variant.price).toFixed(2)}</td>\r\n                                <td>{variant.quantity}</td>\r\n                                <td>{variant.SKU || 'N/A'}</td>\r\n                                <td>\r\n                                  <button\r\n                                    className=\"btn btn-sm btn-danger\"\r\n                                    onClick={async () => {\r\n                                      if (!window.confirm(`Are you sure you want to delete variant '${variant.variant_name}'?`)) return;\r\n                                      setLoading(true); setError(''); setSuccessMessage('');\r\n                                      try {\r\n                                        const config = axiosConfig();\r\n                                        if (!config.headers.Authorization) { setError('Not authenticated. Please log in as admin.'); setLoading(false); return; }\r\n                                        await axios.delete(`https://brightbuy-backend-production-2ccc.up.railway.app/admin/variants/${variant.variant_id}`, config);\r\n                                        setSuccessMessage(`Variant '${variant.variant_name}' deleted successfully!`);\r\n                                        fetchProductVariants(p.product_id);\r\n                                        fetchVariants();\r\n                                      } catch (err) {\r\n                                        setError(err.response?.data?.detail || 'Failed to delete variant');\r\n                                      } finally { setLoading(false); }\r\n                                    }}\r\n                                    disabled={loading}\r\n                                  >Delete</button>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n                          </tbody>\r\n                        </table>\r\n                      ) : (\r\n                        <p className=\"text-muted\">No variants found for this product.</p>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderQuantities = () => (\r\n    <div className=\"quantities-section\">\r\n      <h2>Variant Quantities</h2>\r\n      <div className=\"mb-3\">\r\n        <h5>Select Category</h5>\r\n        <div className=\"btn-group\" role=\"group\">\r\n          {categories.map(c => (\r\n            <button\r\n              key={c.category_id}\r\n              className={`btn btn-outline-primary mx-1 ${c.category_id === selectedCategory ? 'active' : ''}`}\r\n              onClick={() => setSelectedCategory(c.category_id)}\r\n            >\r\n              {c.category_name}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {selectedCategory && (\r\n        <table className=\"table table-bordered\">\r\n          <thead>\r\n            <tr>\r\n              <th>Variant ID</th>\r\n              <th>Product ID</th>\r\n              <th>Variant Name</th>\r\n              <th>Quantity</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {(() => {\r\n              const productIds = new Set(products.filter(p => p.category_id === selectedCategory).map(p => p.product_id));\r\n              return variants\r\n                .filter(v => productIds.has(v.product_id))\r\n                .map(v => (\r\n                  <tr key={v.variant_id}>\r\n                    <td>{v.variant_id}</td>\r\n                    <td>{v.product_id}</td>\r\n                    <td>{v.variant_name}</td>\r\n                    <td>{v.quantity}</td>\r\n                  </tr>\r\n                ));\r\n            })()}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n\r\n      <form className=\"row g-3 align-items-center\" onSubmit={handleUpdateVariantQuantity}>\r\n        <div className=\"col-auto\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Variant ID\"\r\n            value={variantUpdate.variant_id}\r\n            onChange={(e) => setVariantUpdate({ ...variantUpdate, variant_id: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"col-auto\">\r\n          <input\r\n            type=\"number\"\r\n            className=\"form-control\"\r\n            placeholder=\"New Quantity\"\r\n            value={variantUpdate.quantity}\r\n            onChange={(e) => setVariantUpdate({ ...variantUpdate, quantity: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"col-auto\">\r\n          <button type=\"submit\" className=\"btn btn-primary\">Update Quantity</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n\r\n  const downloadReport = async (endpoint, filename) => {\r\n    setLoading(true); setError(''); setSuccessMessage('');\r\n    try {\r\n      const config = axiosConfig();\r\n      if (!config.headers.Authorization) {\r\n        setError('Not authenticated. Please log in as admin.');\r\n        return;\r\n      }\r\n\r\n  const response = await axios.get(`https://brightbuy-backend-production-2ccc.up.railway.app${endpoint}`, {\r\n        ...config,\r\n        responseType: 'blob'\r\n      });\r\n\r\n      // Create download link\r\n      const url = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', filename);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      window.URL.revokeObjectURL(url);\r\n\r\n      setSuccessMessage(`${filename} downloaded successfully!`);\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || `Failed to download ${filename}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderReports = () => (\r\n    <div className=\"reports-section\">\r\n      <h2>Download Reports</h2>\r\n      <p className=\"text-muted\">Generate and download PDF reports for sales analysis and business insights.</p>\r\n\r\n      <div className=\"row g-4\">\r\n        {/* Quarterly Sales Report */}\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card h-100\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">\r\n                <i className=\"bi bi-calendar-range\"></i> Quarterly Sales Report\r\n              </h5>\r\n              <p className=\"card-text\">Get sales breakdown by quarter for a specific year.</p>\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">Year</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  value={reportParams.year}\r\n                  onChange={(e) => setReportParams({ ...reportParams, year: e.target.value })}\r\n                  min=\"2020\"\r\n                  max=\"2030\"\r\n                />\r\n              </div>\r\n              <button\r\n                className=\"btn btn-primary w-100\"\r\n                onClick={() => downloadReport(\r\n                  `/reports/quarterly-sales/${reportParams.year}`,\r\n                  `quarterly_sales_${reportParams.year}.pdf`\r\n                )}\r\n                disabled={loading || !reportParams.year}\r\n              >\r\n                <i className=\"bi bi-download\"></i> Download Report\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Top Selling Products */}\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card h-100\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">\r\n                <i className=\"bi bi-trophy\"></i> Top Selling Products\r\n              </h5>\r\n              <p className=\"card-text\">View best-selling products with optional date filters.</p>\r\n              <div className=\"mb-2\">\r\n                <label className=\"form-label\">Start Date (Optional)</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control\"\r\n                  value={reportParams.startDate}\r\n                  onChange={(e) => setReportParams({ ...reportParams, startDate: e.target.value })}\r\n                />\r\n              </div>\r\n              <div className=\"mb-2\">\r\n                <label className=\"form-label\">End Date (Optional)</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control\"\r\n                  value={reportParams.endDate}\r\n                  onChange={(e) => setReportParams({ ...reportParams, endDate: e.target.value })}\r\n                />\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">Limit</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  value={reportParams.limit}\r\n                  onChange={(e) => setReportParams({ ...reportParams, limit: e.target.value })}\r\n                  min=\"1\"\r\n                  max=\"100\"\r\n                />\r\n              </div>\r\n              <button\r\n                className=\"btn btn-primary w-100\"\r\n                onClick={() => {\r\n                  let endpoint = `/reports/top-selling-products?limit=${reportParams.limit}`;\r\n                  if (reportParams.startDate) endpoint += `&start_date=${reportParams.startDate}`;\r\n                  if (reportParams.endDate) endpoint += `&end_date=${reportParams.endDate}`;\r\n                  downloadReport(endpoint, `top_selling_products.pdf`);\r\n                }}\r\n                disabled={loading}\r\n              >\r\n                <i className=\"bi bi-download\"></i> Download Report\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Category Orders Report */}\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card h-100\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">\r\n                <i className=\"bi bi-tags\"></i> Category-wise Orders\r\n              </h5>\r\n              <p className=\"card-text\">Analyze total orders and revenue by product category.</p>\r\n              <button\r\n                className=\"btn btn-primary w-100\"\r\n                onClick={() => downloadReport(\r\n                  `/reports/category-orders`,\r\n                  `category_orders_report.pdf`\r\n                )}\r\n                disabled={loading}\r\n              >\r\n                <i className=\"bi bi-download\"></i> Download Report\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Customer Order Summary */}\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card h-100\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">\r\n                <i className=\"bi bi-person-badge\"></i> Customer Order Summary\r\n              </h5>\r\n              <p className=\"card-text\">Get detailed order history and payment status for a specific customer.</p>\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">User ID</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  value={reportParams.userId}\r\n                  onChange={(e) => setReportParams({ ...reportParams, userId: e.target.value })}\r\n                  placeholder=\"Enter customer user ID\"\r\n                />\r\n              </div>\r\n              <button\r\n                className=\"btn btn-primary w-100\"\r\n                onClick={() => downloadReport(\r\n                  `/reports/customer-orders/${reportParams.userId}`,\r\n                  `customer_${reportParams.userId}_orders.pdf`\r\n                )}\r\n                disabled={loading || !reportParams.userId}\r\n              >\r\n                <i className=\"bi bi-download\"></i> Download Report\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* All Customers Summary */}\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">\r\n                <i className=\"bi bi-people\"></i> All Customers Summary\r\n              </h5>\r\n              <p className=\"card-text\">Comprehensive report of top customers with order statistics and spending analysis.</p>\r\n              <button\r\n                className=\"btn btn-primary w-100\"\r\n                onClick={() => downloadReport(\r\n                  `/reports/all-customers-summary`,\r\n                  `all_customers_summary.pdf`\r\n                )}\r\n                disabled={loading}\r\n              >\r\n                <i className=\"bi bi-download\"></i> Download Report\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"admin-dashboard container my-5\">\r\n      <h1 className=\"text-center mb-4\">Admin Dashboard</h1>\r\n\r\n      {error && (\r\n        <div className=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\r\n          {error}\r\n          <button type=\"button\" className=\"btn-close\" onClick={() => setError('')}></button>\r\n        </div>\r\n      )}\r\n\r\n      {successMessage && (\r\n        <div className=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n          {successMessage}\r\n          <button type=\"button\" className=\"btn-close\" onClick={() => setSuccessMessage('')}></button>\r\n        </div>\r\n      )}\r\n\r\n      <ul className=\"nav nav-tabs mb-4\">\r\n        <li className=\"nav-item\">\r\n          <button className={`nav-link ${activeTab === 'users' ? 'active' : ''}`} onClick={() => setActiveTab('users')}>Users</button>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <button className={`nav-link ${activeTab === 'orders' ? 'active' : ''}`} onClick={() => setActiveTab('orders')}>Orders</button>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <button className={`nav-link ${activeTab === 'products' ? 'active' : ''}`} onClick={() => setActiveTab('products')}>Products</button>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <button className={`nav-link ${activeTab === 'quantities' ? 'active' : ''}`} onClick={() => setActiveTab('quantities')}>Quantities</button>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <button className={`nav-link ${activeTab === 'reports' ? 'active' : ''}`} onClick={() => setActiveTab('reports')}>Reports</button>\r\n        </li>\r\n      </ul>\r\n\r\n      {loading && <div className=\"text-center\"><div className=\"spinner-border\" role=\"status\"></div></div>}\r\n\r\n      {activeTab === 'users' && renderUsers()}\r\n      {activeTab === 'orders' && renderOrders()}\r\n      {activeTab === 'products' && renderProducts()}\r\n      {activeTab === 'quantities' && renderQuantities()}\r\n      {activeTab === 'reports' && renderReports()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}